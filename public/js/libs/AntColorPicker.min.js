/*! AntColorPicker V1.1 Copyright (c) 2014 AntProduction http://antproduction.free.fr/AntColorPicker */
(function(e){e.fn.AntColorPicker=function(t){function u(e,t,n){var r=n==undefined?"#":n;for(var i in t)e=e.replace(new RegExp(r+i+r,"g"),t[i]);return e}function a(e){var t="";var n="";var i=["00","33","66","99","CC","FF"];for(r=0;r<6;r++){for(g=0;g<6;g++){for(b=0;b<6;b++){n="#"+i[r]+i[g]+i[b];t+=u(e,{color:n})}}}return t}var n='<div id="AntColorPicker" class="AntColorPicker">';n+="<ul>";n+="#contentLineTemplate#";n+="</ul>";n+="#crossToClose#";n+="</div>";var s='<li><a name="#color#" rel="#color#" style="background:#color#;" title="#color#"></a></li>';var o='<a id="CloseColorPicker" class="AntColorPickerClose" title="#labelClose#">#labelClose#</a>';var f={iconPath:"../public/images/antColorPicker/",withRAZOption:true,withCrossToClose:true,labelClose:"Fermer",labelRAZColor:"RÃ©initialiser la valeur",zIndex:1500,largeurPalette:390,contentTemplate:n,contentTemplateLine:s,builder:function(e,t,n,r){var i=a(e);i=t.replace("#contentLineTemplate#",i);return i}};var l=e.extend(f,t);return this.each(function(){function p(n){r=t.val();f=t.offset().left;if(f+l.largeurPalette>h)f-=l.largeurPalette;c=t.offset().top+t.outerHeight(true);n.stopImmediatePropagation();e(document).one("click",m);v()}function d(){var e=t.val().replace("#","").toLowerCase();var n=false;for(i=0;i<6;i+=2)n|=parseInt(e.substr(i,2),16)>128;if(!n)t.addClass("AntColorPicker-whiteFont");else t.removeClass("AntColorPicker-whiteFont")}function v(){m();if(typeof l.builder=="function"){if(l.withCrossToClose!=true){l.contentTemplate=l.contentTemplate.replace("#crossToClose#","")}else{l.contentTemplate=u(n,{crossToClose:o,labelClose:l.labelClose})}var r=l.builder(l.contentTemplateLine,l.contentTemplate)}else throw"Error: the builder parameter must be a function.";e(r).css({position:"absolute",left:f,top:c,zIndex:l.zIndex,width:l.largeurPalette+"px",backgroundColor:t.val()}).appendTo("body");e("#AntColorPicker a").hover(function(){e("#AntColorPicker").css("backgroundColor",e(this).attr("rel"))},function(){e("#AntColorPicker").css("backgroundColor",t.val())});e("#AntColorPicker a").not(".AntColorPickerClose .RaZAntColorPicker").click(function(){t.val(e(this).attr("rel"));t.css("backgroundColor",e(this).attr("rel"));d();m()});e("#AntColorPicker a").mouseover(function(){e("#AntColorPicker").css("backgroundColor",e(this).attr("rel"))});e("#AntColorPicker a.close").click(function(){m()})}function m(){e("#AntColorPicker").remove()}var t=e(this);var r="";t.attr("style","background-color:"+t.val());var s="RaZAntColorPicker_"+Math.floor(Math.random()*1e4);var a=l.withRAZOption==false?"":' <img id="'+s+'" title="'+l.labelRAZColor+'" style="height:'+t.css("height")+'" class="RaZAntColorPicker" src="'+l.iconPath+'vide.png" />';e(a).insertAfter(t);e("#"+s).bind("click",function(){t.val("");t.attr("style","background-color:"+t.val())});var f;var c;var h=e(document).width();t.focusin(function(e){p(e)});t.click(function(e){e.stopPropagation()});t.focusout(function(){var e=t.val();var n=new RegExp("^[#]?[0-9A-Fa-f]{3}([0-9A-Fa-f]{3})?$","g");if(!e.match(n))t.val(r);if(e.indexOf("#")==-1&&e!="")t.val("#"+t.val())})})}})(jQuery)